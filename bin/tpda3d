#!perl
#
# Generate PerlTk Screen modules for Tpda3 applications.
#

use strict;
use warnings;
use utf8;

use Tpda3::Devel;

if ( !@ARGV ) {
    Tpda3::Devel::usage(1);
    exit 1;
}

main();

sub main {
    my $opt = Tpda3::Devel::get_options();

    check_options($opt);

    Tpda3::Devel->new($opt)->process();
}

=head2 check_options

Check and process info options first, then check for options that
exclude ...

=cut

sub check_options {
    my $opt = shift;

    if ( defined $opt->{list} ) {
        require Tpda3::Devel::Info::Config;
        Tpda3::Devel::Info::Config->new->list_configs;
        exit;
    }

    if ( $opt->{generate} and $opt->{update} ) {
        print "Error: -G or -U, not both! \n";
        exit;
    }
}

=head1 NAME

Create a new Tpda3 application or a new screen module and it's
coresponding screen configuration or update an existing screen
configuration.

=head1 SYNOPSIS

   tpda3d <app-cfg> -G

Generate a new Tpda3 application directory tree:

   tpda3d <app-cfg> -U -M [<module-name>]

Generate a new screen and the coresponding configuration file, if one
doesn't exists.

Info:

 -l, --list                List available application configurations.
 -?  --help | -m, --man

=head1 DESCRIPTION

This is a utility program for Tpda3.

Extract table informations from a database and create a basic screen
configuration file and a PerlTk screen module file.

=head1 CONFIGURATION AND ENVIRONMENT

Requirements:

    Tpda3 v0.46 and a Tpda3 application source.

    (The Tpda3 Test application ClassicModels can be used for testing)

=head1 BUGS AND LIMITATIONS

There are no known bugs in this module.

Please report problems to the author(s)

Patches are welcome.

=head1 AUTHOR

Stefan Suciu, C<< <stefan@s2i2.ro> >>

=head1 LICENCE AND COPYRIGHT

Copyright (c) 2011-2012 Stefan Suciu.

All rights reserved.

GNU General Public License
