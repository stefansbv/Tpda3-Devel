#!perl

use strict;
use warnings;
use utf8;

use Data::Dumper;

use Tpda3::Devel;

if ( !@ARGV ) {
    Tpda3::Devel::help();
    exit 1;
}

main();

sub main {
    my $opt = Tpda3::Devel::get_options();

    check_options($opt);

    my $dev = Tpda3::Devel->new($opt);
    my $config = $dev->make_config();
    if (-f $config) {
         $dev->make_screen($config);
    }
}

sub check_options {
    my $opt = shift;

    unless ( $opt->{screen} ) {
        print "Screen name is required!\n";
        die;
    }
    unless ( $opt->{table} ) {
        print "Table name is required!\n";
        die;
    }
}

=head1 NAME

Tpda3 make config.

=head1 SYNOPSIS

tpda3-dev [ -l [ config ]]

tpda3-dev -c <cfg> [-t <table>] [-u <user>] [-p <pass>] screen

=head1 DESCRIPTION

This is a utility program for Tpda3.

Extract table informations from a database and create a basic screen
configuration file.

The info is mapped like this:

  conf        info
  ----------  -------------
  <name>      name
  ctrltype    F(type)  e | d
  readwrite   rw | ro | r
  state       normal | disabled
  bgcolor     white
  numscale    scale    0 if undef
  findtype    full
  label       uc(name)
  width       length (prec for numeric?)
  coltype     F(type)  alphanumplus, numeric

=head1 CONFIGURATION AND ENVIRONMENT

=head1 BUGS AND LIMITATIONS

There are no known bugs in this module.

Please report problems to the author(s)

Patches are welcome.

=head1 AUTHOR

Stefan Suciu  [ stefansbv 'at' users . sourceforge . net ]

=head1 LICENCE AND COPYRIGHT

Copyright (c) 2011-2012 Stefan Suciu.

All rights reserved.

GNU General Public License
